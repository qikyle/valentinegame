<!DOCTYPE html>
<html>
<head>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.55.2/dist/phaser.min.js"></script>
    <style>body { margin: 0; background: #ffdef2; }</style>
</head>
<body>
<script>
    const config = {
        type: Phaser.AUTO,
        width: 800, height: 600,
        physics: { default: 'arcade', arcade: { gravity: { y: 1000 } } },
        scene: { preload: preload, create: create, update: update }
    };

    const game = new Phaser.Game(config);
    let player, platforms, cursors, finishLine;

    function preload() {
        // We'll generate textures in 'create' so you don't need external files!
    }

    function create() {
        // 1. SET THE WORLD SIZE (Long like Mario)
        const worldWidth = 3000;
        this.physics.world.setBounds(0, 0, worldWidth, 600);

        // 2. GENERATE TEXTURES
        // Pink Heart Player
        let heartGfx = this.make.graphics({x: 0, y: 0, add: false});
        heartGfx.fillStyle(0xff69b4, 1); // Hot Pink
        heartGfx.fillCircle(15, 15, 15);
        heartGfx.fillCircle(45, 15, 15);
        heartGfx.fillTriangle(0, 20, 60, 20, 30, 60);
        heartGfx.generateTexture('heartPlayer', 60, 60);

        // Platform Block
        let blockGfx = this.make.graphics({x: 0, y: 0, add: false});
        blockGfx.fillStyle(0xff85c1, 1);
        blockGfx.fillRect(0, 0, 40, 40);
        blockGfx.lineStyle(2, 0xffffff, 1);
        blockGfx.strokeRect(0, 0, 40, 40);
        blockGfx.generateTexture('block', 40, 40);

        // 3. CREATE PLATFORMS (Mario Level Design)
        platforms = this.physics.add.staticGroup();

        // Solid Ground
        for (let x = 0; x < worldWidth; x += 40) {
            platforms.create(x, 580, 'block');
        }

        // Mario-style Platform "Steps" & Challenges
        platforms.create(400, 450, 'block');
        platforms.create(440, 450, 'block');
        
        platforms.create(700, 350, 'block');
        platforms.create(740, 350, 'block');
        platforms.create(780, 350, 'block');

        platforms.create(1100, 450, 'block');
        platforms.create(1250, 300, 'block');
        platforms.create(1400, 450, 'block');

        // A "Staircase" at the end
        for(let i = 0; i < 5; i++) {
            for(let j = 0; j <= i; j++) {
                platforms.create(2200 + (i * 40), 540 - (j * 40), 'block');
            }
        }

        // 4. THE PLAYER (The Pink Heart)
        player = this.physics.add.sprite(100, 450, 'heartPlayer').setScale(0.6);
        player.setCollideWorldBounds(true);

        // 5. THE FINISH LINE (Asian Girl Pixel Placeholder)
        // We'll use a gold block to represent the finish for now
        finishLine = this.physics.add.sprite(2800, 500, 'block').setTint(0xffd700);
        
        // 6. CAMERA SETUP
        this.cameras.main.setBounds(0, 0, worldWidth, 600);
        this.cameras.main.startFollow(player, true, 0.1, 0.1);

        // 7. PHYSICS
        this.physics.add.collider(player, platforms);
        this.physics.add.collider(finishLine, platforms);
        this.physics.add.overlap(player, finishLine, winGame, null, this);

        cursors = this.input.keyboard.createCursorKeys();
    }

    function update() {
        if (cursors.left.isDown) player.setVelocityX(-250);
        else if (cursors.right.isDown) player.setVelocityX(250);
        else player.setVelocityX(0);

        if (cursors.up.isDown && player.body.touching.down) {
            player.setVelocityY(-600);
        }
    }

    function winGame() {
        this.physics.pause();
        let msg = this.add.text(player.x, 300, 'You reached me!\nWill you be my Valentine?', { 
            fontSize: '32px', fill: '#ff0066', align: 'center', 
            backgroundColor: '#ffffff', padding: 20
        });
        msg.setOrigin(0.5);
    }
</script>
</body>
</html>
